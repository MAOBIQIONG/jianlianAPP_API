<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AppzUserMapper">  
	<!-- 查询个人首页信息 -->
	<select id="findUserByid" resultType="pd" parameterType="pd">
	    select 
			a.ID as USER_ID,
			a.IMG,
			a.POSITION,
			a.FLAG,
			a.SHOW_NAME,
			a.UNREAD,
			(select COMPANY_NAME from COMPANY where id=a.COMPANY_ID) COMPANY_NAME,
			VIP_LEVEL,
			(SELECT NAME FROM SYS_DICTIONARIES WHERE 
			CONCAT('viptype_',a.VIP_LEVEL) = P_BM) NAME,
		(select COUNT(ID) FROM COLLECTION where FIND_IN_SET(TYPE,'JL_APP_MEDIA,PROJECT,PPP,JL_DP_SHOP') and USER_ID = a.ID)COLLECT_NUM,
    (select COUNT(ID) FROM ORDERS where STATUS='01' and USER_ID = a.ID) ORDER_NUM,
		(select 
		   case when COUNT(ID) > 0 then '01' 
           else '02' end 
         from sys_notification where IS_READ='0' and ISDEL='1' and USER_ID=a.ID) IS_READMSG,
		a.TOTAL_POINTS from app_user a
		where a.ID = #{USER_ID}
	</select>  
	
	<resultMap id="userMap" type="pd">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<id column="USER_ID" property="USER_ID" jdbcType="VARCHAR" />
        <result column="IMG" property="IMG" jdbcType="VARCHAR" />
        <result column="POSITION" property="POSITION" jdbcType="VARCHAR" />
        <result column="COMPANY_NAME" property="COMPANY_NAME" jdbcType="VARCHAR" />
        <result column="VIP_LEVEL" property="VIP_LEVEL" jdbcType="VARCHAR" />
        <result column="SUMMARY" property="SUMMARY" jdbcType="VARCHAR" />
        <result column="PHONE" property="PHONE" jdbcType="VARCHAR" />
         <result column="NEED_NAME" property="NEED_NAME" jdbcType="VARCHAR" />
          <result column="RESOURCE" property="RESOURCE" jdbcType="VARCHAR" />
           <result column="ASSESS" property="ASSESS" jdbcType="VARCHAR" />
	    <collection property="HONOR" column="USER_ID" javaType="ArrayList"
		    ofType="pd" select="AppzUserMapper.findUserHonor" />  
	</resultMap>
	<!-- 查询个人首页详细信息 -->
	<select id="findUserByidDetail" resultMap="userMap" parameterType="pd">
	   select 
			a.ID as USER_ID,
			a.IMG,
			a.POSITION,
			a.FLAG,
			a.SHOW_NAME,
			a.REAL_NAME,
			(select COMPANY_NAME from COMPANY where id=a.COMPANY_ID) COMPANY_NAME,
			(SELECT NAME FROM SYS_DICTIONARIES WHERE 
			CONCAT('viptype_',a.VIP_LEVEL) = P_BM) VIP_LEVEL,
			a.SUMMARY,
		   (select PHONE from sys_user where id=a.MANAGER_ID ) AS PHONE,
		   ASSESS,
		   (select  GROUP_CONCAT(NEED_NAME)from JL_USER_NEEDS
		where USER_ID = a.ID) as NEED_NAME,
			(select  GROUP_CONCAT(RESOURCE)		 from JL_USER_RESOURCE
					where USER_ID = a.ID) as RESOURCE
         from app_user a
		where a.ID = #{USER_ID}
	</select>  
	
	<select id="findUserHonor" resultType="pd" parameterType="pd">
	   select 
			HONOR,
			DATE_FORMAT(GET_DATE,'%Y-%m-%d %H:%i:%s') as GET_DATE
		 from JL_USER_HONOR
		where USER_ID = #{USER_ID}
	</select> 
	<!-- 新增用户荣誉-->
	<insert id="saveHonors" parameterType="pd">
	    INSERT into JL_USER_HONOR(ID,HONOR,USER_ID,GET_DATE,CREATE_DATE) 
	    VALUE(#{ID},#{HONOR},#{USER_ID},#{GET_DATE},NOW())
	</insert>
	<!-- 新增用户需求-->
	<insert id="saveNeeds" parameterType="pd">
	    INSERT into JL_USER_NEEDS(ID,NEED_NAME,USER_ID,CREATE_DATE) 
	    VALUE(#{ID},#{NEED_NAME},#{USER_ID},NOW())
	</insert>
	<!-- 新增用户资源-->
	<insert id="saveRESOURCE" parameterType="pd">
	    INSERT into JL_USER_RESOURCE(ID,RESOURCE,USER_ID,CREATE_DATE) 
	    VALUE(#{ID},#{RESOURCE},#{USER_ID},NOW())
	</insert>
	
	<!-- 查询用户名与性别 -->
	<select id="findUsergr" resultType="pd" parameterType="pd">
	   select 
			a.REAL_NAME,	
			case when a.sex is null then '10'
      else a.sex end SEX
	   from app_user a
		where a.ID = #{USER_ID}
	</select> 
	
	<!-- 查询用户基本信息-->
	<select id="findUserDetail" resultType="pd" parameterType="pd">
	  SELECT 
			a.ID as USER_ID,
			a.USER_NAME,
			a.REAL_NAME,
			a.CARD_NO,
			a.PHONE,
			a.EMAIL,
			a.VIP_LEVEL,
			(SELECT NAME FROM SYS_DICTIONARIES WHERE 
			CONCAT('viptype_',a.VIP_LEVEL) = P_BM) VIP_LEVELNAME,
			CASE WHEN  DATE_SUB(NOW(),INTERVAL 3 MONTH)>a.UPGRADE_DATE then '00'
     		else '01' end  VIP,
 			a.UPGRADE_DATE,
			a.DUE_DATE,
			a.MANAGER_ID,
            s.phone
		from app_user a left join sys_user s on a.MANAGER_ID=s.id
		where a.ID = #{USER_ID}
	</select> 
	
	<!-- 查询用户入会升级信息-->
	<select id="findSjrh" resultType="pd" parameterType="pd"> 
	   SELECT 
		a.ID as USER_ID,a.USER_NAME,a.CARD_NO,a.PHONE,a.EMAIL,a.VIP_LEVEL,
        a.FLAG,a.SHOW_NAME,
		(SELECT NAME FROM SYS_DICTIONARIES WHERE 
		CONCAT('viptype_',a.VIP_LEVEL) = P_BM) VIP_LEVELNAME,
		CASE WHEN  DATE_SUB(NOW(),INTERVAL 3 MONTH)>a.UPGRADE_DATE then '00'
    	else '01' end  VIP,a.UPGRADE_DATE,a.DUE_DATE,a.MANAGER_ID,s.phone,
    	a.CLAN_ID,c.NAME as CLANNAME,a.COMPANY_ID,d.CATEGORY_ID,d.CATENAME
	  from app_user a 
	  left join sys_user s on a.MANAGER_ID=s.id
	  left join clan c on a.CLAN_ID=c.ID
	  left join (SELECT com.ID,cat.ID AS CATEGORY_ID,cat.NAME AS CATENAME FROM company com,category cat WHERE com.CATEGORY_ID = cat.ID ) d on a.COMPANY_ID=d.ID
	  where a.ID = #{USER_ID}
	</select> 
	
	<!-- 修改用户信息 -->
	<update id="updateDetail" parameterType="pd">
		update app_user set 
		   <if test="PHONE != null and PHONE != ''">
		   		PHONE=#{PHONE},
		   </if>
		   <if test="EMAIL != null and EMAIL != ''">
		   		EMAIL=#{EMAIL},
		   </if>
		     <if test="REAL_NAME != null and REAL_NAME != ''">
		   		REAL_NAME=#{REAL_NAME},
		   </if>
		     <if test="POSITION != null and POSITION != ''">
		   		POSITION=#{POSITION},
		   </if>
		     <if test="COMPANY_ID != null and COMPANY_ID != ''">
		   		COMPANY_ID=#{COMPANY_ID},
		   </if>
			ID=#{USER_ID}
		where ID = #{USER_ID}
	</update>
	
	
	<!-- 修改用户名与性别 -->
	<update id="updateUser" parameterType="pd">
		update app_user set sex=#{SEX},REAL_NAME=#{REAL_NAME},SUMMARY=#{SUMMARY},
		CLAN_ID=#{CLAN_ID},ID = #{USER_ID} where ID = #{USER_ID}
	</update>
	
	<!-- 修改用户头像 -->
	<update id="updateUserHider" parameterType="pd">
		update app_user set IMG=#{IMG}
		where ID = #{USER_ID}
	</update>
	
	<!-- 查询用户公司信息 -->
	<select id="findUsergs" resultType="pd" parameterType="pd">
	  SELECT 
		a.POSITION,
		b.ID as COMPANY_ID,
		b.COMPANY_NAME,
		b.ADDR,
		b.INTERNET_PATH,
		b.DESCRIPTION,
		b.CATEGORY_ID,
		b.LOGO,
		(select name from CATEGORY where id=b.CATEGORY_ID) NAME
		from app_user a
		INNER JOIN company b on a.COMPANY_ID=b.id
		where a.ID = #{USER_ID}
	</select>  
	
	<!-- 修改用户职务 -->
	<update id="updatePosition" parameterType="pd">
		update app_user set POSITION=#{POSITION},COMPANY_ID=#{COMPANY_ID}
		where ID = #{USER_ID}
	</update>
	<!-- 修改用户公司信息 -->
	<update id="updateUserGs" parameterType="pd">
		update company 
			set COMPANY_NAME=#{COMPANY_NAME},
			ADDR=#{ADDR},
			INTERNET_PATH=#{INTERNET_PATH},
			DESCRIPTION=#{DESCRIPTION},
			CATEGORY_ID=#{CATEGORY_ID}
		where ID = (select COMPANY_ID from app_user where ID = #{USER_ID})
	</update>
	
	<!-- 修改用户公司信息 -->
	<insert id="saveCompany" parameterType="pd">
	   INSERT into company(ID,COMPANY_NAME,BUSINESS_LICENSE,ADDR,CATEGORY_ID,CREATE_BY,CREATE_DATE,LOGO,DESCRIPTION,INTERNET_PATH) 
	    VALUE(#{ID},#{COMPANY_NAME},#{BUSINESS_LICENSE},#{ADDR},#{CATEGORY_ID},#{USER_ID},NOW(),#{LOGO},#{DESCRIPTION},#{INTERNET_PATH})
	</insert>
	
	<resultMap id="cateGoryMap" type="pd">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<id column="ID" property="ID" jdbcType="VARCHAR" />
        <result column="NAME" property="NAME" jdbcType="VARCHAR" />
	    <collection property="CHILDCATEGORY" column="ID" javaType="ArrayList"
		    ofType="pd" select="AppzUserMapper.findChildCategory" /> 
	</resultMap>
	
	<!-- 查询行业信息 -->
	<select id="findCategory" resultMap="cateGoryMap" parameterType="pd">
	 	select ID,NAME from CATEGORY where PID='0' and ISDEL='1'
	</select>  
	<select id="findChildCategory" resultType="pd" parameterType="pd">
	 	select ID,NAME from CATEGORY where ID=#{ID} and ISDEL='1'
	</select>  
	
	<!-- 获取用户积分列表 -->
	<select id="findPoints" resultType="pd" parameterType="pd">
	 	select  
			(SELECT NAME FROM SYS_DICTIONARIES WHERE CONCAT('points_',a.POINT_TYPE) = P_BM) POINT_TYPE,
			DATE_FORMAT(a.DATE,'%Y-%m-%d') as DATE,
			a.POINTS,a.DESCRIPTION from POINTS a where a.ISDEL='1' and a.USER_ID=#{USER_ID}
	 	limit #{start},#{pageSize}
	</select> 
	 
	<!-- 获取用户积分总数 -->
	<select id="findTotalPoints" resultType="pd" parameterType="pd">
	 	select CASE WHEN SUM(POINTS) IS NULL THEN '0'
		  ELSE SUM(POINTS) END TOTALPOINTS
		 from POINTS where ISDEL='1' and USER_ID=#{USER_ID}
	</select>
	
	
	<!-- 获取用户订单列表 -->
	<select id="findOrders" resultType="pd" parameterType="pd"> 
		SELECT O.ID,O.TYPE, O.EVENT,O.STATUS,O.PRICE,DATE_FORMAT(O.DATE,'%Y-%m-%d %H:%i:%s') as DATE,U.ID AS UP_ID,U.STATUS AS UP_STATUS,I.ID AS IN_ID
		from ORDERS O LEFT JOIN JL_UPGRADE U ON O.ID=U.ORDER_ID LEFT JOIN JL_INVOICE I ON O.ID=I.ORDER_ID WHERE O.ISDEL='1' AND O.STATUS!='20' and O.USER_ID=#{USER_ID} ORDER BY O.DATE DESC
	 	limit #{start},#{pageSize}
	</select>
	<!-- 获取用户订单详情 -->
	<select id="orderDetail" resultType="pd" parameterType="pd">
	 	SELECT O.ID,O.PRICE,DATE_FORMAT(O.DATE,'%Y-%m-%d %H:%i:%s') as DATE,
	 	O.EVENT,O.STATUS,O.TYPE,O.ORDER_NO,U.UPGRADE_LEVEL,I.IS_EXPRESS,I.TYPE AS IN_TYPE
		from ORDERS O 
		LEFT JOIN JL_UPGRADE U ON O.ID=U.ORDER_ID 
		LEFT JOIN JL_INVOICE I ON O.ID=I.ORDER_ID
		WHERE O.ID=#{ID} and O.USER_ID=#{USER_ID}
	</select>

	<!-- 新增用户订单支付信息 -->
	<insert id="addOrderPay" parameterType="pd">
	    INSERT into pay(ID,ORDER_ID,USER_ID,PRICE,STATUS,DESCRIPTION,PAY_TYPE,DATE) 
	    VALUE(#{ID},#{ORDER_ID},#{USER_ID},#{PRICE},#{STATUS},#{DESCRIPTION},#{PAY_TYPE},NOW())
	</insert>

	<resultMap id="newMap" type="pd">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
        <result column="MONTHGROUP" property="MONTHGROUP" jdbcType="VARCHAR" />
	    <collection property="NEWS" column="{mp=MONTHGROUP,uid=USER_ID}" javaType="ArrayList"
		    ofType="pd" select="AppzUserMapper.findnew" /> 
	</resultMap>
	<!-- 获取用户消息月份分组 -->
	<select id="findNews" resultMap="newMap" parameterType="pd">
	 	select CREATE_DATE as MONTHGROUP,USER_ID from (
			SELECT CREATE_DATE,USER_ID FROM(
			select DATE_FORMAT(CREATE_DATE,'%Y-%m')CREATE_DATE,USER_ID from SYS_NOTIFICATION 
			WHERE ISDEL='1' and (USER_ID=#{USER_ID} or USER_ID='jianlian')
			)a GROUP BY CREATE_DATE
			)a ORDER BY CREATE_DATE DESC
	 	limit #{start},#{pageSize}
	</select>
	<!-- 获取用户消息列表 -->
	<select id="findnew" resultType="pd" parameterType="pd">
	 	select 
			ID,
			CONTENT,
			DATE_FORMAT(CREATE_DATE,'%Y-%m-%d %H:%i:%s') as CREATE_DATE,
			STATUS,
			DESCRIPTION,
			IS_READ,
			TABLE_NAME,
			OBJECT_ID 
		from SYS_NOTIFICATION WHERE ISDEL=1 and (USER_ID=#{uid} or USER_ID='jianlian')
		and CREATE_DATE LIKE  CONCAT(CONCAT('%', #{mp}), '%')
		ORDER BY CREATE_DATE DESC 
	</select>
	
	<!-- 新增问题反馈 -->
	<insert id="editfeedBack" parameterType="pd">
	    INSERT into FEEDBACK(ID,FEEDBACK_CONTENT,USER_ID,EMAIL,STATUS,IMG_PATH,FEEDBACK_DATE) 
	    VALUE(#{ID},#{FEEDBACK_CONTENT},#{USER_ID},#{EMAIL},'1',#{IMG_PATH},NOW())
	</insert>
	 
	 <!-- 获取证件信息 -->
	<select id="findCetif" resultType="pd" parameterType="pd">
	 	 SELECT  
			ID,USER_ID,CERTIFICATE_NAME,CERTIFICATE_TYPE,IMG_PATH,STATUS
		from 
		CERTIFICATES where ISDEL='1' and USER_ID=#{USER_ID}
	</select>
	<!-- 上次证件信息 -->
	<insert id="saveCetif" parameterType="pd">
	 	 insert INTO CERTIFICATES(ID,USER_ID,CERTIFICATE_NAME,CERTIFICATE_TYPE,IMG_PATH,STATUS,DATE,COMPANY_ID,ISSYSLOOK)
		 VALUE(#{ID},#{USER_ID},#{CERTIFICATE_NAME},#{CERTIFICATE_TYPE},#{IMG_PATH},'01',NOW(),#{COMPANY_ID},#{ISSYSLOOK})
	</insert>
	<!-- 修改证件信息 -->
	<update id="editCetif" parameterType="pd">
	 	 update CERTIFICATES
		 set 
		     CERTIFICATE_NAME=#{CERTIFICATE_NAME},
		     CERTIFICATE_TYPE=#{CERTIFICATE_TYPE},
			 IMG_PATH=#{IMG_PATH},
			 ISSYSLOOK=#{ISSYSLOOK},
			 STATUS='01',
			 DATE=NOW()
		 WHERE ID=#{ID}
	</update>
	 <!-- 获取证件信息 -->
	<select id="findCetifbyId" resultType="pd" parameterType="pd">
	 	SELECT  
			*
		from 
		CERTIFICATES where ISDEL=1 and  USER_ID=#{USER_ID} and CERTIFICATE_TYPE=#{CERTIFICATE_TYPE}
	</select>
	
	<!-- 修改会员等级 -->
	<update id="updateUserLevel" parameterType="pd">
		update app_user set 
		   VIP_LEVEL = #{VIP_LEVEL}
		where ID = #{USER_ID}
	</update>
	
	 <!-- 获取证件审核信息 -->
	<select id="findCetifshbyId" resultType="pd" parameterType="pd">
	 	select 
			a.ID as USER_ID,a.PHONE,a.POSITION,a.REAL_NAME,
			b.COMPANY_NAME,
			(select IMG_PATH from CERTIFICATES WHERE USER_ID=a.ID and ISDEL='1' and CERTIFICATE_TYPE='2') IMG_PATH
		 from app_user a
		LEFT JOIN COMPANY b on a.COMPANY_ID=b.ID
		where a.ID=#{USER_ID}
	</select>
	
	<!-- 查询公司信息 -->
	<select id="findgs" resultType="pd" parameterType="pd">
	  SELECT 
		*
		from company 
		where ID = (SELECT COMPANY_ID FROM APP_USER WHERE ID=#{USER_ID})
	</select>  
	
	<!-- 根据用户id查询公司id -->
	<select id="queryComById" resultType="pd" parameterType="pd">
	    SELECT COMPANY_ID FROM APP_USER WHERE ID=#{USER_ID}
	</select>  
	<!-- 修改公司名称 -->
	<update id="editGs" parameterType="pd">
		update company set 
		     COMPANY_NAME = #{COMPANY_NAME},
		     CREATE_BY = #{CREATE_BY},
		     CREATE_DATE = #{CREATE_DATE}
		where ID = #{ID}
	</update>
	
	<!-- 新增公司信息 -->
	<insert id="saveGs" parameterType="pd">
	    INSERT into company(ID,COMPANY_NAME,CREATE_BY,CREATE_DATE,CATEGORY_ID) 
	    VALUE(#{ID},#{COMPANY_NAME},#{CREATE_BY},#{CREATE_DATE},#{CATEGORY_ID})
	</insert>
	
	<!-- 新增用户消息信息-->
	<insert id="saveUserMsg" parameterType="pd">
	    INSERT into sys_notification(ID,CONTENT,USER_ID,CREATE_DATE,TABLE_NAME,STATUS,OBJECT_ID) 
	    VALUE(#{ID},#{CONTENT},#{USER_ID},#{CREATE_DATE},#{TABLE_NAME},#{STATUS},#{OBJECT_ID})
	</insert>
	
	<!-- 新增用户升级会员审核信息-->
	<insert id="saveUserhy" parameterType="pd">
	    INSERT into JL_UPGRADE(ID,USER_ID,UPGRADE_LEVEL,PRICE_TOPAY,STATUS,CREATE_DATE,IS_AGREE,LEVEL) 
	    VALUE(#{ID},#{USER_ID},#{UPGRADE_LEVEL},#{PRICE_TOPAY},'01',NOW(),'00',#{LEVEL})
	</insert>
	
	<!-- 提交审核信息是删除相关新 -->
	<delete id="delNotification" parameterType="pd">
			update sys_notification set isdel='2'  where USER_ID=#{USER_ID} and TABLE_NAME='jl_upgrade' and status='01'
	</delete>
	<delete id="delOrder" parameterType="pd">
		update orders set isdel='2' where USER_ID=#{USER_ID} and status='00' and type='01'
	</delete>
	<delete id="delUpgrade" parameterType="pd">
		delete from jl_upgrade where USER_ID=#{USER_ID} and STATUS='01'
	</delete>  
	
	<!-- 修改所属建联 -->
	<update id="editUserInfo" parameterType="pd">
		update app_user set CLAN_ID=#{CLAN_ID} where ID = #{USER_ID}
	</update>
	
	<!-- 修改公司信息 -->
	<update id="editUserCom" parameterType="pd">
		update app_user set COMPANY_ID=#{COMPANY_ID} where ID = #{USER_ID}
	</update>
	
	<!-- 修改所属行业 -->
	<update id="editCompanyInfo" parameterType="pd">
		UPDATE company a LEFT JOIN app_user b on a.ID = b.COMPANY_ID SET a.CATEGORY_ID= #{CATEGORY_ID} where b.ID = #{USER_ID}
	</update>
	
	<!-- 根据用户id查询上一次升级的时间是否已经超过三个月-->
	<select id="queryUpIsOut" resultType="pd" parameterType="pd">
	    SELECT  a.ID as USER_ID,a.USER_NAME,a.VIP_LEVEL, CASE WHEN  DATE_SUB(NOW(),INTERVAL 3 MONTH)>a.UPGRADE_DATE then '00' else '01' end VIP
	  	from app_user a where a.ID =#{USER_ID}
	</select>   
	
	<!-- 查询用户的名片、手机号、公司名称、所属建联、所属行业 -->
	<select id="queryusxx" resultType="pd" parameterType="pd"> 
	     SELECT AU.ID AS USID,AU.PHONE,AU.VIP_LEVEL,CP.ID AS COMID,CP.COMPANY_NAME,CA.ID AS CLID,CA.NAME AS CLNAME,CT.ID AS HYID,CT.NAME AS HYNAME,
	  MP.CERTIFICATE_NAME,MP.ID AS MPID,MP.IMG_PATH FROM APP_USER AU LEFT JOIN COMPANY CP ON AU.COMPANY_ID=CP.ID LEFT JOIN CLAN CA ON AU.CLAN_ID=CA.ID 
	  LEFT JOIN CATEGORY CT ON CT.ID=CP.CATEGORY_ID LEFT JOIN CERTIFICATES MP ON AU.ID=MP.USER_ID AND MP.CERTIFICATE_TYPE=2 and  MP.ISDEL=1 
	  WHERE 1=1 and AU.ID=#{USER_ID}
	</select>  
	
	<!-- 修改公司名称 -->
	<update id="editcomname" parameterType="pd" flushCache="false">
		UPDATE company SET  
		<if test="COMPANY_NAME !=null">	
			  COMPANY_NAME=#{COMPANY_NAME} ,
		</if>
		<if test="CATEGORY_ID !=null">	
			  CATEGORY_ID=#{CATEGORY_ID} ,
		</if>
		ID = #{CID}
		WHERE ID = #{CID}
	</update> 
	<!-- 修改用户手机号 -->
	<update id="editusephone" parameterType="pd" flushCache="false">
		UPDATE app_user SET PHONE=#{PHONE} WHERE ID = #{USER_ID}
	</update> 
	<!-- 修改用户名片 -->
	<update id="editmingpian" parameterType="pd" flushCache="false">
		UPDATE certificates SET IMG_PATH=#{IMG_PATH} WHERE USER_ID =#{USER_ID} AND CERTIFICATE_TYPE=2
	</update> 
	<!-- 没有公司，修改时给他创建添加一个 -->
	<update id="editGSX" parameterType="pd" flushCache="false">
		update app_user
		set COMPANY_ID=#{ID}
		where ID = #{USER_ID}
	</update> 
</mapper>